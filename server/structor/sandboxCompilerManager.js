"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function compileSandbox(){if(void 0===sandboxCompiler)try{sandboxWebpackConfig=require(_utils.config.webpackConfigFilePath()),sandboxWebpackConfig=(0,_lodash.cloneDeep)(sandboxWebpackConfig);var e=_path2.default.join(_utils.config.sandboxDirPath(),"index.js"),o=_utils.config.sandboxDirPath(),n="bundle.js";sandboxWebpackConfig.entry=[e],sandboxWebpackConfig.output={path:o,filename:n},sandboxWebpackConfig.resolve=sandboxWebpackConfig.resolve||{},sandboxWebpackConfig.resolve.modules=[_utils.config.SANDBOX_DIR,"node_modules"],sandboxWebpackConfig.stats="errors-only",sandboxCompiler=(0,_webpack2.default)(sandboxWebpackConfig)}catch(e){throw Error("Webpack config was not found. "+e)}return new Promise(function(e,o){sandboxCompiler.run(function(n,a){var r=a.toJson({assets:!1,assetsSort:"field",cached:!1,children:!1,chunks:!1,chunkModules:!1,chunkOrigins:!1,chunksSort:"field",colors:!1,errors:!0,errorDetails:!1,hash:!1,modules:!0,modulesSort:"field",publicPath:!1,reasons:!1,source:!1,timings:!1,version:!1,warnings:!1});n?(console.error(n),o(n.message?n.message:n.toString())):r.errors.length>0?o(r.errors.join("\n\n")):e()})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileSandbox=compileSandbox;var _path=require("path"),_path2=_interopRequireDefault(_path),_lodash=require("lodash"),_webpack=require("webpack"),_webpack2=_interopRequireDefault(_webpack),_utils=require("../utils"),sandboxCompiler=void 0,sandboxWebpackConfig=void 0;